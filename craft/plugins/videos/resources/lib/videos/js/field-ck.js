/**
 * Videos Plugin Assets
 *
 * @package   Videos Plugin
 * @author    Benjamin David
 * @copyright Copyright (c) 2013, Dukt
 * @license   http://dukt.net/
 * @link      http://dukt.net/
 */dkvideos.currentField=!1;dkvideos.player.init=function(){dkvideos.player._init();$(document).on("click",".dkv-overlay",function(){$(".dkv-player").css("display")!="none"?dkvideos.player.hide():dkvideos.modal.hide();return!1});$(".dkv-modal").on("click",".dkv-cancel",function(){dkvideos.modal.hide();return!1});$(".dkv-modal").on("click",".dkv-submit",function(){if(!$(this).hasClass("dkv-disabled")){dkvideos.player.hide();dkvideos.modal.hide();$("input.text",dkvideos.currentField).attr("value",dkvideos.currentVideo.url);dkvideos.field.embed(dkvideos.currentVideo.url,dkvideos.currentField)}return!1})};dkvideos.player.play=function(e){dkvideos.currentVideo=e;dkvideos.player.show()};dkvideos.player.resize=function(){var e=$(".dkv-modal").outerHeight(),t=$(".dkv-modal").outerWidth(),n=$(".dkv-modal .dkv-bottom").outerHeight(),r=e,i=r-$(".dkv-player .dkv-bottom").outerHeight();$(".dkv-player").css("height",r);$(".dkv-player .dkv-embed").css("height",i)};dkvideos.player.show=function(){$(".dkv-player").css("display","block");$(".dkv-modal .dkv-back").removeClass("dkv-hidden");$(".dkv-modal .dkv-cancel").addClass("dkv-hidden");$(".dkv-modal .dkv-sidebar").addClass("dkv-hidden");$(".dkv-modal .dkv-main").addClass("dkv-full");$(".dkv-modal .dkv-favorite").removeClass("dkv-hidden");this.resize()};dkvideos.player.hide=function(){$(".dkv-player .dkv-embed").html("");$(".dkv-modal .dkv-back").addClass("dkv-hidden");$(".dkv-modal .dkv-cancel").removeClass("dkv-hidden");$(".dkv-modal .dkv-sidebar").removeClass("dkv-hidden");$(".dkv-modal .dkv-main").removeClass("dkv-full");$(".dkv-modal .dkv-favorite").addClass("dkv-hidden");$(".dkv-player").css("display","none")};dkvideos.modal.resize=function(){var e=$(window).height(),t=$(window).width(),n=$(".dkv-modal").outerHeight(),r=$(".dkv-modal").outerWidth(),i=(e-n)/2,s=(t-r)/2;$(".dkv-modal").css("top",i);$(".dkv-modal").css("left",s);var o=$(".dkv-modal .dkv-top").outerHeight(),u=$(".dkv-modal .dkv-main .dkv-bottom").outerHeight(),a=n-o-u;$(".dkv-content").css("height",a);this._resize()};dkvideos.field={embed:function(e,t){DuktVideosCms.postActionRequest("fieldEmbed",{videoUrl:e},function(e){var n=$(".dkv-embed",t);n.html("");n.css("display","block");$(e.embed).appendTo(n);$(".dkv-add",t).css("display","none");$(".dkv-change",t).css("display","inline-block");$(".dkv-remove",t).css("display","inline-block");dkvideos.field.resize()})},resize:function(){var e={w:1280,h:720},t=$(".dkv-field").outerWidth(),n=t*e.h/e.w;$(".dkv-field .dkv-embed").css("height",n)}};dkvideos.scroll.init=function(){var e=$(".dkv-main .dkv-content"),t=$(".dkv-videos");this.check(e,t)};(function(e){e.fn.dukt_videos_field=function(t){return this.each(function(){field=e(this);e.fn.dukt_videos_field.init_field(field)})};e.fn.dukt_videos_field.init=function(){DuktVideosCms.postActionRequest("modal",{},function(t){e(t).appendTo("body");dkvideos.player.init();dkvideos.modal.init();angular.bootstrap(e(".dkv-modal"),["videos"])});typeof Matrix!="undefined"&&Matrix.bind("dukt_videos","display",function(t){if(t.row.isNew){var n=e("> .dkv-field",t.dom.$td);e.fn.dukt_videos_field.init_field(n)}})};e.fn.dukt_videos_field.init_field=function(t){var n=e("input.text",t),r=n.val();if(r!=="")dkvideos.field.embed(r,t);else{e(".dkv-add",t).css("display","inline-block");e(".dkv-change",t).css("display","none");e(".dkv-remove",t).css("display","none")}e(".dkv-add, .dkv-change",t).click(function(){dkvideos.currentField=t;dkvideos.modal.show()});e(".dkv-remove",t).click(function(){n.val("");e(".dkv-embed",t).css("display","none");e(".dkv-embed",t).html();e(".dkv-add",t).css("display","inline-block");e(".dkv-change",t).css("display","none");e(".dkv-remove",t).css("display","none")})};e(document).ready(function(){e.fn.dukt_videos_field.init()})})(jQuery);$(document).ready(function(){$(".dkv-field").dukt_videos_field()});$(window).resize(function(){dkvideos.field.resize();dkvideos.player.resize();dkvideos.modal.resize()});