/**
 * Videos Plugin Assets
 *
 * @package   Videos Plugin
 * @author    Benjamin David
 * @copyright Copyright (c) 2013, Dukt
 * @license   http://dukt.net/
 * @link      http://dukt.net/
 */function ServicesListCtrl(e,t,n,r,i,s,o){function a(e,i){typeof t.playlistId!="undefined"&&(e.playlistId=t.playlistId);o.loader.on();n({method:"POST",url:DuktVideosCms.getActionUrl(e.method,e)}).success(function(e,t,n,r){}).error(function(e,t,n,r){}).then(function(e,t,n){typeof i=="function"?i(e.data):r.videos=e.data;dkvideos.scroll.init();setTimeout(function(){dkvideos.modal.resize()},10);e.data.length<Dukt_videos.pagination_per_page?o.videoMore.off():o.videoMore.on();if(e.data.length>0){$(".dkv-main .dkv-empty").css("display","none");$(".dkv-main .dkv-videos").css("display","block")}else{$(".dkv-main .dkv-empty").css("display","block");$(".dkv-main .dkv-videos").css("display","none")}o.loader.off()})}if($(".dkv-main").length>0&&o.appLoaded==0){e.$on("$viewContentLoaded",function(e,t){var n={lines:9,length:3,width:2,radius:4,corners:1,rotate:0,direction:1,color:"#000",speed:2,trail:60,shadow:!1,hwaccel:!1,className:"dkv-spin1",zIndex:2e3,top:0,left:0};$(".dkv-reload .dkv-spin").spin(n)});o.appLoaded=!0;setTimeout(function(){$(".dkv-empty").css("display","block");dkvideos.modal.resize()},10)}e.$on("$viewContentLoaded",function(e,t){});if(typeof t.serviceKey!="undefined"&&typeof t.methodName!="undefined"){var u={providerClass:t.serviceKey,method:t.methodName,page:1,perPage:Dukt_videos.pagination_per_page};t.methodName!="search"&&a(u,function(e){r.videos=e;$(".dkv-main .dkv-content").length>0&&$(".dkv-main .dkv-content").scrollTop(0)})}$(".dkv-modal .dkv-submit").addClass("dkv-disabled");e.reload=function(){s.reload()};e.favorite=function(){currentVideo=e.selected;if(!e.isFavorite){method="favoriteAdd";e.isFavorite=!0}else{method="favoriteRemove";e.isFavorite=!1}n({method:"POST",url:DuktVideosCms.getActionUrl(method,{id:currentVideo.id,providerClass:t.serviceKey})}).success(function(e,t,n,r){}).error(function(e,t,n,r){})};e.moreVideos=function(){if(!o.videoMore.isLoading()){o.videoMore.loadingOn();var e=r.videos.length;perPage=Dukt_videos.pagination_per_page;page=Math.floor(e/perPage)+1;var n={method:t.methodName,providerClass:t.serviceKey,searchQuery:o.searchQuery,page:page,perPage:perPage};a(n,function(e){$.merge(r.videos,e);o.videoMore.loadingOff()})}};e.select=function(t){e.selected=dkvideos.currentVideo=t;$(".dkv-modal .dkv-submit").removeClass("dkv-disabled")};e.play=function(i){$(".dkv-favorite").css("display","none");serviceLibrary=r.services[t.serviceKey];e.isFavorite=!1;dkvideos.player.play(i);o.loader.on();n({method:"POST",url:DuktVideosCms.getActionUrl("embed",{videoUrl:i.url,providerClass:t.serviceKey})}).success(function(t,n,r,i){$(".dkv-favorite").css("display","block");$(".dkv-player .dkv-embed").html(t.embed);var s=!1;serviceLibrary.supportsOwnVideoLike?s=!0:t.video.authorId==serviceLibrary.userInfos.id?s=!1:s=!0;s?t.isFavorite?e.isFavorite=!0:e.isFavorite=!1:$(".dkv-favorite").css("display","none");o.loader.off()}).error(function(e,t,n,r){})};e.isFavorite=!1;e.isSelected=function(t){return e.selected===t}};