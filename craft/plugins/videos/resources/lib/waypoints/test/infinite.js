// Generated by CoffeeScript 1.6.1
var standardWait;$.waypoints.settings.scrollThrottle=10;$.waypoints.settings.resizeThrottle=20;standardWait=50;describe("Waypoints Infinite Scroll Shortcut",function(){var e,t,n,r,i,s;t=e=n=s=i=null;r=$(window);beforeEach(function(){loadFixtures("infinite.html");t=$(".infinite-item");e=$(".infinite-container");n=$(".infinite-more-link");return s=i=!1});it("returns the same jQuery object for chaining",function(){return expect(t.waypoint("infinite").get()).toEqual(t.get())});describe("loading new pages",function(){beforeEach(function(){var n,o;o={onBeforePageLoad:function(){return s=!0},onAfterPageLoad:function(){return i=!0}};e.waypoint("infinite",o);runs(function(){var t;t=$.waypoints("viewportHeight")-e.height();return r.scrollTop(t)});n=function(){return $(".infinite-item").length>t.length};return waitsFor(n,2e3,"new items to load")});it("appends them to the infinite container",function(){return expect($(".infinite-container > .infinite-item").length).toEqual(10)});it("replaces the more link with the new more link",function(){expect(n[0]).not.toEqual($(".infinite-more-link")[0]);return expect($(".infinite-more-link").length).toEqual(1)});it("fires the before callback",function(){return expect(s).toBeTruthy()});return it("fires the after callback",function(){return expect(i).toBeTruthy()})});return afterEach(function(){$.waypoints("destroy");return r.scrollTop(0)})});